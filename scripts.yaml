turn_on_max_cleaning:
  sequence:
    - service: system_log.write
      data_template:
        message: >-
            {{ '[SCRIPT] --- turn_ON_max_cleaning ---'}}|
        level: warning
        
    - service: input_boolean.turn_on
      data:
        entity_id: input_boolean.max_clean
        
    # Living Room
    - service: fan.set_speed
      data:
        entity_id: fan.livingroom_xiaomi
        speed: favorite
    
    # Bedroom
    - service: fan.set_speed
      data:
        entity_id: fan.bedroom_xiaomi
        speed: favorite
        
    # Kidsroom
    - service: fan.set_speed
      data:
        entity_id: fan.kidsroom_xiaomi
        speed: favorite    
    
    # Garage
    - service: fan.set_speed
      data:
        entity_id: fan.garage_xiaomi
        speed: favorite
    
    # Playroom
    - service: fan.set_speed
      data:
        entity_id: fan.playroom_xiaomi
        speed: favorite    
        
    # needed and to just to protect device from too often on/off
    - delay: '00:00:30'
        
    # as setting speed turns on xiaomi fan -> invoke automation to set it correctly
    - service: automation.trigger
      entity_id: automation.playroom_air_quality
    
    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.bedroom_air_quality
        
    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.kidsroom_air_quality

    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.garage_air_quality
      
    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.kidsroom_air_quality
        
turn_off_max_cleaning:
  sequence:
    - service: system_log.write
      data_template:
        message: >-
            {{ '[SCRIPT] --- turn_OFF_max_cleaning ---'}}|
        level: warning
        
    - service: input_boolean.turn_off
      data:
        entity_id: input_boolean.max_clean
  
    - service: fan.set_speed
      data:
        entity_id: fan.livingroom_xiaomi
        speed: silent
    
    - service: fan.set_speed
      data:
        entity_id: fan.bedroom_xiaomi
        speed: silent
        
    - service: fan.set_speed
      data:
        entity_id: fan.kidsroom_xiaomi
        speed: silent
        
    - service: fan.set_speed
      data:
        entity_id: fan.garage_xiaomi
        speed: auto
        
    - service: fan.set_speed
      data:
        entity_id: fan.playroom_xiaomi
        speed: auto
    
    # needed and to just to protect device from too often on/off
    - delay: '00:00:15'
        
    # as setting speed turns on xiaomi fan -> invoke automation to set it correctly
    - service: automation.trigger
      entity_id: automation.playroom_air_quality
    
    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.bedroom_air_quality
        
    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.kidsroom_air_quality

    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.garage_air_quality
      
    # not needed - just to protect device from too often on/off
    - service: automation.trigger
      entity_id: automation.kidsroom_air_quality
